name: GitHubActions

on: [push]

jobs:
  Lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: GitHub Action for SwiftLint
        uses: norio-nomura/action-swiftlint@master
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  
  Test:
    runs-on: macOS-latest
    strategy:
         matrix:
           destination: ['platform=iOS Simulator,OS=latest,name=iPhone 11']
    steps:       
      - name: Checkout
        uses: actions/checkout@v2

      - name: Run build
        env: 
          destination: ${{ matrix.destination }}
        run: swift build -v

      - name: Run tests
        env: 
         destination: ${{ matrix.destination }}
        run: swift test -v

      - name: Run coverage reports
        uses: codecov/codecov-action@v1.0.15
        with:
          token: $CODECOV_TOKEN